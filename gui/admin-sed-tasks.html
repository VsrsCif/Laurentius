<div class="main">
    <article class='content'>
        <h1 id="gui/admin-sed-box:admin">Seznam tipov opravil</h1>

        Administracija <b>opravil</b> (Scheduler) se nahaja v sklopu orodij <b>Nastavitve</b>
        (Settings), orodje Opravila (Scheduler). Urejanje omogoča spreminjanje in dodajanje 
        novih tipov opravil, ter določanje urnikov izvajanja opravil. 
        <h2 id="gui/admin-sed-tasks:list">Seznam tipov opravil</h2>
        Orodje <b>Opravila</b> prikazuje seznam tipov opravil in urnikov izvajanja opravil.
        V orodni vrstici seznama so gumbi za dodajanje, spreminjanje in brisanje tipa opravila.<br /><br />
        <img src="img/gui/task-type-list.png" alt="Task type" width="680"/> <br />
        <br />
        Ob kliku na gumb <b>Dodaj</b> (Add),  <b>Uredi</b> (Edit) ali dvojnem kliku na izbrano 
        vstico se prikaže dialog za dodajanje/urejanje tipa opravila.
        <br /><br />
        <center>
            <img src="img/gui/task-type-edit.png" alt="SEDBox admin" width="450"/> <br />
        </center><br />

        <h2 id="gui/admin-sed-tasks:add-edit">Dodajanje, urejanje tipa opravila</h2>      
        Implementacija opravila je v obliki "stateless" EJB-ja, ki implementira metodo <b>executeTask(Properties p)</b> vmesnika <br />
        <code>si.sed.commons.interfaces.TaskExecutionInterface</code>
        <pre><code>@Local
public interface TaskExecutionInterface {
    
     String executeTask(Properties p) throws TaskException;
     String getType();
     String getName();
     String getDesc();
     Properties getProperties();

}</code></pre>
        Arhitektura omogoča poljubno izdelavo opravil, ki se jih namesti v deploy mapo aplikacijskega strežnika.
        V konfiguraciji tipa opravila je tako treba navesti <b>JNDI (EJB naslov)</b> do instance tipa opravila.<br>Npr:
        <code>java:global/sed-basic-tasks/TaskBackup!si.sed.commons.interfaces.TaskExecutionInterface</code>.</br>
        Nato se klikom na gumb <i>Osveži (Refresh)</i>  preveri dostop do opravila ter se osvežijo podatki:
        <ul>
            <li><b>Enolična oznaka tipa opravila: (Type)</b> je enolična oznaka tipa opravila.</li>
            <li><b>Ime tipa opravila: (Name)</b> poimenovanje opravila.</li>
            <li><b>Opis opravila: (Desc)</b> Opis opravila. </li>
            <li><b>Parametri opravila (Task properties)</b>: Parametri opravila, ki se jih nastavi določi ob dodajanju opravila v urnik.</li>
        </ul>

        <h2 id="gui/admin-sed-tasks:cron-add-edit">Dodajanje, urejanje urnika opravil</h2>      
        Orodje <b>Urnik opravil</b> (Cron jbos) prikazuje seznam urnikov izvajanja opravil.
        V orodni vrstici seznama so gumbi za dodajanje spreminjanje in brisanje urnikov.<br /><br />
        <img src="img/gui/cron_list.png" alt="Task type" width="680"/> <br />

        Ob kliku na gumb <b>Dodaj</b> (Add),  <b>Uredi</b> (Edit) ali dvojnem kliku na izbrano 
        vstico, se prikaže dialog za dodajanje/urejanje urnika posameznega opravila.
        <br /><br />
        <center>
            <img src="img/gui/task-backup-cron.png" alt="SEDBox admin" width="450"/> <br />
        </center><br />
        Na levi strani dialoga za urejanje urnika opravila se določi čas izvajanja:

        Laurentius uporablja java Timer
        Navodila so povzeta po strani:
	 <a href="http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html">Java Using the Timer Service</a>
        <table WIDTH="680" CELLPADDING="3" CELLSPACING="0" class="styled-table">
            <tbody>
                <tr><th><p>Lastnost</p></th>
                    <th><p>Opis</p></th>
                    <th><p>Privzeta vrednost</p></th>
                    <th><p>Nabor vrednosti in primeri</p></th>
                </tr>
                <tr><td><p><i>sekunda</i></p></td>
                    <td><p>ena ali več sekund v minuti</p></td>
                    <td><p><i>0</i></p></td>
                    <td><p><i>0</i> do <i>59</i>. Primer:  <i>second="30"</i>.</p></td>
                </tr>
                <tr><td><p><i>minuta</i></p></td>
                    <td><p>Ena ali več minut v uri</p></td>
                    <td><p><i>0</i></p></td>
                    <td><p><i>0</i> do <i>59</i>. Primer:  <i>minute="15"</i>.</p></td>
                </tr>
                <tr><td><p><i>ura</i></p></td>
                    <td><p>Ena ali več ur v dnevu</p></td>
                    <td><p><i>0</i></p></td>
                    <td><p><i>0</i> do <i>23</i>. Primer:  <i>hour="13"</i>.</p></td>
                </tr>
                <tr><td><p><i>Dan v tednu</i></p></td>
                    <td><p>En ali več dni v tednu. Številka ali angl. ime dneva.</p></td>
                    <td><p><i>*</i></p></td>
                    <td><p><i>0</i> do <i>7</i> (Vrednosti 0 in 7 sta nedelja. Primer: <i>dayOfWeek="3"</i>.</p><p><i>Sun</i>, <i>Mon</i>, <i>Tue</i>, <i>Wed</i>, <i>Thu</i>, <i>Fri</i>, <i>Sat</i>. Primer:  <i>dayOfWeek="Mon"</i>.</p></td>
                </tr>
                <tr><td><p><i>Dan v mesecu</i></p></td>
                    <td><p>En ali več dni v mesecu</p></td>
                    <td><p><i>*</i></p></td>
                    <td><p><i>1</i> do <i>31</i>. Primer:  <i>dayOfMonth="15"</i>.</p><p><i>–7</i> do <i>–1</i> (Negativna vrednost 
                            pomeni  <i>n</i>-ti dan pred koncem meseca).
                            Primer:  <i>dayOfMonth="–3"</i>.</p><p><i>Last</i>. Primer:  <i>dayOfMonth="Last"</i>.</p><p>[<i>1st</i>, <i>2nd</i>, <i>3rd</i>, <i>4th</i>, <i>5th</i>, <i>Last</i>] [<i>Sun</i>,
                            <i>Mon</i>, <i>Tue</i>, <i>Wed</i>, <i>Thu</i>, <i>Fri</i>, <i>Sat</i>]. Primer:  <i>dayOfMonth="2nd Fri"</i>.</p></td>
                </tr>
                <tr><td><p><i>Mesec</i></p></td>
                    <td><p>En ali več mesecev v letu</p></td>
                    <td><p><i>*</i></p></td>
                    <td><p><i>1</i> do <i>12</i>. Primer:  <i>month="7"</i>.</p>
                        <p><i>Jan</i>, <i>Feb</i>, <i>Mar</i>, <i>Apr</i>, <i>May</i>,
                            <i>Jun</i>, <i>Jul</i>, <i>Aug</i>, <i>Sep</i>, <i>Oct</i>, <i>Nov</i>, <i>Dec</i>. Primer:  <i>month="July"</i>.</p></td>
                </tr>
                <tr><td><p><i>Leto</i></p></td>
                    <td><p>Koledarsko leto</p></td>
                    <td><p><i>*</i></p></td>
                    <td><p>Štirimestno število. Primer:  <i>year="2011"</i>.</p></td>
                </tr>
            </tbody>
        </table>

        <h2>Koledarski izrazi in pravila</h2>
   

        <a name="giqju"></a><h5>Uporaba izrazov</h5>
        <p>Izraz 'zvedica' (<i>*</i>) pomeni vse možne vrednosti.</p>

        <p>Izraz pomeni vsako minuto:</p>
        <pre>minute="*"</pre><p>Izraz pomeni vse dni v tednu:</p>

        <pre>dayOfWeek="*"</pre>

        <a name="giqnd"></a><h5>Seznam vrednosti</h5>
        <p>Za določanje seznama vrednosti se uporablja znak vejica (<i>,</i>).</p>

        <p>Ponovitve vrednosti v seznamu se ingnorirajo.</p>

        <p>Primer seznama: Torek in Četrtek:</p>

        <pre>dayOfWeek="Tue, Thu"</pre><p>Primer izraza: ob 4h,  vsako uro od 9h-17h in ob 22h:</p>

        <pre>hour="4,9–17,22"</pre>

        <a name="giqmu"></a><h5>Določanje intervala</h5>
        <p>Uporabi znak 'minus' (<i>–</i>) za določanje intervala (mejne vrednosti so vključene v interval).</p>

        <p>Izraz za določitev intervala od 9h do 17h:</p>

        <pre>hour="9–17"</pre><p>Ostali primeru:</p>

        <pre>dayOfWeek="5–1"</pre>, 

        <pre>dayOfMonth="25–5"</pre><p> je enak izrazu:</p>

        <pre>dayOfMonth="25–Last,1–5"</pre>

        <a name="giqkv"></a><h5>Določanje dela vrednosti</h5>
        <p>Znak deljeno (<i>/</i>) določa velikost intervala  <i>N</i> sekund, minut, ur. 
            Naprimer izraz  <i>x/y</i>, <i>x</i>
            pomeni pričetek <i>y</i> pomeni dolžino intervala. Namesto <i>x</i> se lahko uporabi * ali 
             <i>0</i>.</p>

        <p>Vrednost se lahko določa samo za  <i>sekunde</i>, <i>minute</i> in <i>ure</i>.</p>

        <p>Primer izraza za vsakih  10 minut vsako uro:</p>

        <pre>minute="*/10"</pre><p> je enako kot:</p>

        <pre>minute="0,10,20,30,40,50"</pre><p>Primer izraza, kjer se prične izvajati ob 12h vsake dve uri:</p>

        <pre>hour="12/2"</pre>

    </article>  
</div>
