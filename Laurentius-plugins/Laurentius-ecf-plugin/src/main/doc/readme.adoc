:icons: font
:version: 0.1.0
:date: 16.11.2022


= Laurentius dodatek: eOdložišče

verzija: {version}, {date}


== Uvod

Dodatek *eOdložišče* je implementacija funkcionalnih zahtev določenih v dokumentu:
link:resources/FTZ-vlaganje-1.0.0.pdf[Funkcionalne in tehnične zahteve za e-Vlaganje v varni elektronski predal sodišča]. (Verzija: 1.0.0, 20. 04. 2022)

== Namen dokumenta
Dokument opisuje izgradjo in namestive dodatka


== Nastavitve

Nastavitve se urejajo v dialogu za registracijo dodatka

image::resources/images/dialog-intercepor.png[]


- *ecf.payload.metadata.name*: Naziv priponke, ki vsebuje obvezne meta-podatke pošiljke. Naziv se uporabi v primeru, da sporočilo vsebuje več priponk tipa XML.
- *ecf.service.pdf-validation.url*: URL sevisa za preverjanje ustreznosti PDF vsebin (Primer:  http://localhost:9085/).
- *ecf.service.pdf-validation.aplik-id*: Vhodni parameter 'applicationId' za preverjanje ustreznosti PDF vsebin.
- *ecf.service.pdf-validation.report.return*: Vhodni parameter 'includeReport' za preverjanje ustreznosti PDF vsebin. Porocilo se izpise log datoteko!
- *ecf.payload.mimetypes*: Seznam dovoljenih mime tipov priponk ločenih z vejico. Primer: [application/xml,text/xml,application/pdf])
- *ecf.payload.metadata.oprst.regexp*: 'RegExp' za preverjanje opravilne stevilke in lociranja podatka za vpisnik! (Primer: "^(\\S*\\s+)?(?<vpisnik>\\S*)\\s+(\\d*\\/\\d{2,4})$")
- *ecf.payload.digest.encoding*: Nacin kodiranja zgostivene vrednosti: moznosti: hex,base64
- *ecf.payload.digest.algorithm*: Dovoljen algoritem za izracun zgostivene vrednosti: SHA1,SHA256,SHA512
- *ecf.service.timestamp.url*: URL naslov za casovno zigosanje.
- *ecf.service.timestamp.timeout_in_ms*: Timeout za klic casovneg zigosanja v ms.
- *ecf.signature.mandatory*: V primer "true": splosna vloga mora biti podpisa sicer se podpise z uporabo kljuca: dolocenega v "ecf.sign.key.alias"
- *ecf.sign.key.alias*: Alias kljuca za podpis vloge.


Preverjanje priponk dohodne pošte

Obstoj priponke z metapodatki. V primeru, da je v priponkah vec datotek tipa XML, se isce datoteka z oznako dolocena v "ecf.payload.metadata.name" : SplosnaVlogaV2.xsd
Preverjane, da je datotaka skladna shemo "SplosnaVloga". Shema je sestavni del "dodatka" eOdlozisce.
Preverjanje pravilnosti metapodatkov:

 - SodiSif: mora biti vrednost iz sifranta
 - OprSt mora biti izdelana po formatu dolocenem v "regexp" in vpisnik mora biti v sifrantu:
 - PravnoPodrocjeSif mora biti iz sifranta...
 - Poleg metapodatkov mora biti dodan vsaj end dokment tipa XML ali PDF
 - vsi dokumenti imajo izracunan hash
 - V primeru, da je podan HashAlgoritem: mora biti eden izmed dovoljenih hash algoritmov po:SHA1,SHA256,SHA512
 - V primeru, da hash ni podan, potem je prevzeti hash
 - Natanko en dokument v priponki mora biti oznacen kot vodilni dokument (in to ne sme biti splosna vloga)


== Sifranti

Sifranti se nahajajo v mapi

    $laurentius-home/plugins/ecf-plugin/data

Sifranti

 - link:/resources/sifrant-pravna-podrocja.json[sifrant-pravna-podrocja.json]
 - link:/resources/sifrant-sodisca.json[sifrant-sodisca.json]
 - link:/resources/sifrant-vpisniki.json[sifrant-sodisca.json]